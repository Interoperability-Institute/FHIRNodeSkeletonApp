<html>
	<head>
		<link rel="stylesheet" type="text/css" href="./main.css" />
	</head>
	<body>
		<main class="main">
			<h1>SMART Launch Example</h1>
			<p>
				To get started, create a SMART App in <a target="_BLANK" href="https://interoperabilityland.com">Interoperability Land.</a>
			</p>
			<ol>
				<li>
					Navigate to a Sandbox.
				</li>
				<li>
					Choose the FHIR PIT that you would like to connect to.
				</li>
				<li>
					Navigate to the SMART App tab and register a new SMART App
				</li>
				<li>
					Name your SMART App and enter 'http://localhost:5000/' for the Redirect URI and then click OK.
				</li>
				<li>
					Connect to the FHIR PIT using the Client ID that was generated and the FHIR Server URL.
				</li>
			</ol>
			<div id='toast'>

			</div>
			<section>
				<div class="container-padding">
					<h2>Step 1: Connect to global health pit </h2>
					<p>Navigate to a FHIR PIT in IOL (Interoperability Land) and enter the URL and paste it in the URL field below. Create a SMART App in IOL and enter the client id into the field below.</p>
					<div class="form-container">
						<form id="formConnect">
							<div>
								<label for="fhirServerUrl">FHIR Server URL:</label>
								<div class="form-connect-url-container">
									<div class='form-connect-url-container-input'>
										<input type="text" id="fhirServerUrl" placeholder='Ex: https://url.interopland.com/pit-name/' />
									</div>
									<div class='form-connect-url-container-trail'>
										fhir/
									</div>
								</div>
							</div>
							<div>
								<label for="clientID">Client ID</label>
								<input type="text" id="clientID" placeholder='Ex: 2l68pgq4c6gn9p4tvosqt58mlp' />
							</div>
							<button type="submit">
								Connect
							</button>
						</form>
					</div>
				</div>
			</section>
			
			<section>
				<div class="container-padding">
				 <form id="formAppointmentSearch">
					<h2>Step 2: Search global health pit for upcoming appointments, by date range.</h2>
					<fieldset id="">
					   <p>
					         Please select a date range for your appointment. Availability will be shown between these dates.
					   </p>
					   <label for="startDate">startDate</label>
	                   <input type="text" id="startDate" placeholder="yyyy/mm/dd" /> 
					   
					    <label for="endDate">endDate</label>
					   <input type="text" id="endDate" placeholder="yyyy/mm/dd" />
                    </fieldset>
					<button type="submit">
								Search
					</button>
				 </form>	
					
				</div>
			</section>
			<section>
				<div class="container-padding container-results">
					<h2>
						Step 3: Appointments in that date range
					</h2>
					<p> Once you have searched, your results will appear here </p>
				</div>
				<div id='searchResultsList' class="search-results-list">
				</div>
			</section>
			<section>
				<div class="container-padding container-results">
					<h2>
						Step 4: Select Patients
					</h2>
					<p>This is the list of patients for which appointments fall in the range.</p>
					<p>Click an item to prepare it to be sent to the screening app</p>
					<div id='patientsFromAppointmentsList' class="search-results-list">
					</div>
				</div>
			</section>
			<section>
				<div class="container-padding">
					<h2>Step 5: Connect to the Connectathon Application Pit</h2>
					<p>Enter details to a second pit (Interoperability Land) and enter the URL and paste it in the URL field below. </p>
					<div class="form-container">
						<form id="formWriteConnect">
							<div>
								<label for="fhirServerWriteUrl">FHIR Server URL:</label>
								<div class="form-connect-url-container">
									<div class='form-connect-url-container-input'>
										<input type="text" id="fhirServerWriteUrl" placeholder='Ex: https://url.interopland.com/pit-name/' />
									</div>
									<div class='form-connect-url-container-trail'>
										fhir/
									</div>
								</div>
							</div>
							<div>
								<label for="clientWriteID">Client ID</label>
								<input type="text" id="clientWriteID" placeholder='Ex: 2l68pgq4c6gn9p4tvosqt58mlp' />
							</div>
							<button type="submit">
								Connect
							</button>
						</form>
					</div>
				</div>
			</section>
			<section>
				<div class="container-padding container-results">
					<h2>
						Step 6: Load patients from cookies
					</h2>
					<p>Click the button to load stored data from step 4.</p>
					<button id="loadFromCookies">Load stored patient(s) from local storage (cookies)</button>
					<button id="eraseFromCookies">Delete patients from local storage (cookies)</button>
					<div id='loadedPatients' class="search-results-list"></div>
					</div>
				</div>
			</section>
			<section>
				<form id="formPatientSubmit">
					<h2>Step 7: Attempt to submit patient to screening app once loaded in step 6</h2>
					<button type="submit">
						Send Patient to Currently Connected Pit
					</button>
				</form>
			</section>	
		</div>
	</body>
	<script src='https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.min.js'></script>
	<script src="./cookieUtils.js"></script>
	<script src="./index.js"></script>
</html>